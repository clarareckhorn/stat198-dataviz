---
title: Week 4
subtitle: R Basics (3) - ggplot2
format: stat198slides-revealjs
---

# Introduction

This is a sample deck for DataViz DeCal Slides. The features include:

1. Title slide with background image.
2. A bunch of yaml defaults.
3. Clickable logo in lower right that links to the previous page.
4. No logo or slide number on title slide.
5. Custom `:::poll` div for poll questions.
6. A [countdown timer](https://github.com/gadenbuie/countdown/tree/main/quarto) accessible by adding

   `{{< countdown "01:30" >}}`
   
   on a new line.


## Agenda

- Reading discussion  
- ggplot2: why do we use it?
- Activity: coding practice


# Reading Discussion {.smaller}
In groups of 2-3, discuss the reading:

1. What's one thing you liked about how the graphic portrays the data?
2. What's one thing you would change about the graphic to make it better?
3. Review: What data types are being portrayed in the graphic? Which charts did they decide to use?

`{{< countdown "3:00" >}}`

# What is ggplot2?

- Last week: packages in R \
- Today: `ggplot2` package \
- A data visualization package for the R programming language \

## Examples of graphs we can make with `ggplot2`

![](images/ggplot2graphs.png)


## `ggplot2()`

. . .

A plot can be decomposed into three primary elements (according to grammar of graphics):

1. the **data**,
2. the **aesthetic mapping** of the variables in the data to visual channels, and
3. the **geometry** used to translate the observations into marks on the plot.


## {.smaller auto-animate=true}

::: {.columns}
::: {.column}
```{r}
#| label: "hi mom"
penguins |>
  select(bill_length_mm,
         flipper_length_mm,
         species)
```
:::
::: {.column .fragment}
```{r}
#| echo: false
#| fig-height: 9
penguins |>
  ggplot(aes(x = bill_length_mm,
             y = flipper_length_mm,
             color = species)) +
  geom_point() +
  theme_gray(base_size = 18)
```
:::
:::

::: notes
Draw arrows mapping variables to visual cues
:::

## {.smaller auto-animate=true}

::: {.columns}
::: {.column}
```{r}
#| eval: false
penguins |>
  ggplot(aes(x = bill_length_mm,
             y = flipper_length_mm,
             color = species)) +
  geom_point()
```
:::
::: {.column}
```{r}
#| echo: false
#| fig-height: 9
penguins |>
  ggplot(aes(x = bill_length_mm,
             y = flipper_length_mm,
             color = species)) +
  geom_point() +
  theme_gray(base_size = 18)
```
:::
:::


## `ggplot2()` syntax

. . .

`ggplot2()` builds a plot layer by layer, each one added on top of one another with `+` (not `|>`).

. . .

- `ggplot(df)` creates canvas
- `aes()` creates mappings, called inside `ggplot()` or a `geom()`
- `geom_()` puts down marks using declared geometry

## Layer by layer

```{r}
#| eval: false
penguins |>
  ggplot(aes(x = bill_length_mm,
             y = flipper_length_mm,
             color = species)) +
  geom_point() +
  theme_gray(base_size = 18)
```


## Common `aes()`

::: {.columns}
::: {.column}
- `x`
- `y`
- `color`
- `fill`
:::
::: {.column}
- `size`
- `shape`
- `alpha`
:::
:::

## Common `geom_()`

::: {.columns}
::: {.column}
- `geom_point()`
- `geom_bar() / geom_col()`
- `geom_line()`
:::
::: {.column}
- `geom_histogram()`
- `geom_boxplot()`
- `geom_violin()`
- `geom_density()`
:::
:::



# Activity: Coding Practice
Go to BCourses and download the `week4-activity.qmd` file to work on today's coding activity.

# Next level

Let's practice making some graphs with `ggplot2`!

1. Open RStudio and create a new Quarto document.
2. Load the `palmerpenguins` package and the `penguins` dataset.
3. Create a scatter plot of `bill_length_mm` vs `flipper_length_mm`, colored by `species`.
4. Experiment with different `geom_()` functions to visualize the data
5. Customize your plots with themes and labels.

